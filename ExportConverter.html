
<script>
    $(document).ready(function() {
      $("#jsonFile").change(function(e) {
        let file = e.target.files[0];
        if (file) {
          let reader = new FileReader();
          reader.onload = function(event) {
            let data = JSON.parse(event.target.result);
            generateImages(data);
          };
          reader.readAsText(file);
        }
      });
    });
    
    function generateImages(data) {
      data.forEach((item, index) => {
        let canvas = new fabric.Canvas(null, { width: 500, height: 200 });
        let text = new fabric.Textbox(`Prompt: ${item.prompt}\nResponse: ${item.response}`, {
          left: 10,
          top: 10,
          fontFamily: 'Arial',
          fill: '#000',
          fontSize: 14
        });
        canvas.add(text);
        canvas.renderAll();
    
        let image = canvas.toDataURL("image/png").replace("image/png", "image/octet-stream"); // here is the most important part because if you dont replace you will get a DOM 18 exception.
    
        let link = document.createElement('a');
        link.download = `${item.prompt}_${index}.png`;
        link.href = image;
        link.click();
      });
    }
    </script>
    